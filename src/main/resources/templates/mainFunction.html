<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${title}">Bubble Sort Visualization</title>
    <link rel="stylesheet" href="/css/homepage.css">

    <style>

        /* =========================
           GENERIC STATES (EXISTING)
           ========================= */
        .current {
            background-color: yellow;      /* currently comparing */
        }

        .sorted {
            background-color: green;       /* fixed */
            color: white;
        }

        .current-min {
            background-color: orange;      /* selection sort min */
        }

        /* =========================
           MERGE SORT (EXISTING)
           ========================= */
        .left-subarray {
            background-color: #add8e6;     /* light blue */
        }

        .right-subarray {
            background-color: #f4a460;     /* sandy brown */
        }

        .current-left {
            background-color: #00ff00;     /* green */
            border: 2px solid #008000;
        }

        .current-right {
            background-color: #ff0000;     /* red */
            border: 2px solid #800000;
        }

        /* =========================
           QUICK SORT (NEW)
           ========================= */

        /* Active partition range */
        .active-range {
            border: 2px dashed #999;
        }

        /* Pivot element */
        .pivot {
            background-color: #800080;     /* purple */
            color: white;
        }

        /* Compared / swapped indices */
        .current-a {
            background-color: #ffd700;     /* gold */
        }

        .current-b {
            background-color: #ff8c00;     /* dark orange */
        }

        /* =========================
           OPTIONAL VISUAL POLISH
           ========================= */
        .active-range:not(.pivot):not(.sorted) {
            background-color: #f0f0f0;
        }

        .sorted.pivot {
            background-color: #006400;     /* dark green */
        }
    </style>
</head>
<body>
<h1 th:text="${title}"></h1>

<div id="array-container"></div>

<button id="prevBtn">Previous</button>
<button id="nextBtn">Next</button>
<button id="autoBtn">Auto</button>
<script src="/js/core/barAnimator.js"></script>

<script th:inline="javascript">
    const title = [[${title}]]; // Thymeleaf injects the page title
    let steps = [[${steps}]]; // Thymeleaf injects backend precomputed steps
    let scriptFile = '';

    if (title === 'SelectionSort') {
        scriptFile = '/js/selectionSort.js';
    } else if (title === 'BubbleSort' || title === 'InsertionSort') {
        scriptFile = '/js/bubbleAndInsertion.js';
    } else if(title === 'MergeSort') {
        scriptFile ='/js/mergeSort.js';
    } else if (title === 'QuickSort'){
        scriptFile = '/js/quickSort.js';
    } else if ( title === 'LinearSearch') {
        scriptFile = '/js/linearSearch.js';
    } else if ( title === 'BinarySearch') {
        scriptFile = "/js/binarySearch.js";
    }

    if (scriptFile) {
        const script = document.createElement('script');
        script.src = scriptFile;
        script.defer = true; // optional, to wait until HTML is parsed
        document.body.appendChild(script);
    }
</script>
</body>
</html>
